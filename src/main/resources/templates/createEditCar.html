<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Create/Edit Car</title>
</head>
<body>

<h1 th:text="${car.getId() != null ? 'Edit Car' : 'Create New Car'}"></h1>

<form th:action="@{${car.id != null ? '/'+car.id + '/edit/' + carType : '/new'}}" method="post">

    <!-- Выбор типа автомобиля -->
    <label for="carType">Car Type:</label>
    <span id="carType" th:text="${carType}"></span><br>
    <input type="hidden" name="carType" th:value="${carType}"/>

    <!-- Общие поля -->
    <label for="model">Model:</label>
    <input type="text" id="model" name="model" th:value="${car.model}" required/><br/>

    <label for="brand">Brand:</label>
    <input type="text" id="brand" name="brand" th:value="${car.brand}" required/><br/>

    <label for="price">Price ($):</label>
    <input type="number" id="price" name="price" th:value="${car.price}" required/><br/>

    <label for="color">Color:</label>
    <input type="text" id="color" name="color" th:value="${car.color}" required/><br/>

    <label for="yearOfManufacture">Year of Manufacture:</label>
    <input type="number" id="yearOfManufacture" name="yearOfManufacture" th:value="${car.yearOfManufacture}" required/><br/>

    <!-- Поля для каждого типа машины -->
    <div th:switch="${carType}">
        <div th:case="'PassengerCar'">
            <label for="doors">Doors:</label>
            <input type="number" id="doors" name="doors" th:value="${car.doors}"/><br/>
            <label for="seatingCapacity">Seating Capacity:</label>
            <input type="number" id="seatingCapacity" name="seatingCapacity" th:value="${car.seatingCapacity}"/><br/>
        </div>

        <div th:case="'Truck'">
            <label for="payloadCapacity">Payload Capacity (tons):</label>
            <input type="number" id="payloadCapacity" name="payloadCapacity" th:value="${car.payloadCapacity}"/><br/>
            <label for="cargoType">Cargo Type:</label>
            <input type="text" id="cargoType" name="cargoType" th:value="${car.cargoType}"/><br/>
        </div>

        <div th:case="'ElectricCar'">
            <label for="batteryCapacity">Battery Capacity (kWh):</label>
            <input type="number" id="batteryCapacity" name="batteryCapacity" th:value="${car.batteryCapacity}"/><br/>
            <label for="rangePerCharge">Range per Charge (km):</label>
            <input type="number" id="rangePerCharge" name="rangePerCharge" th:value="${car.rangePerCharge}"/><br/>
        </div>
    </div>

    <button type="submit">Save</button>
</form>

<a href="/">Back to List</a>

</body>
</html>
